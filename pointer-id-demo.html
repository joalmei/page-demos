<!DOCTYPE html>
<html>
<head>
<style>
html, body {
  width: 100%;
  height: 100%;
}

.content {
    width: 100%;
    height: 100%;
    border-style: solid;
    border-width: 0.1rem;
    border-color: black;
    background-color: lightgray;
}

.floating-box{
  border: 1px solid rgba(0, 0, 0, 1);
  position: absolute;
  z-index: 2;
  width: 270px;
  height: 120px;
  padding:0;
  font-size: smaller;
  background-color: aqua;
  visibility: hidden;
  pointer-events: none;
}
.overlay {
    z-index: 1;
}

canvas {
    touch-action: none;
}
</style>
</head>

<body>
<canvas id="board" class="content"></canvas>

<div id="overlay" class="overlay"></div>
<div id="box-pen" class="floating-box" style="left: 10px; top: 10px">
    <div style="font-size: xx-large;">pointer id: </div>
    <div style="font-size: xx-large;">pointer down: </div>
    <div style="font-size: xx-large;">pointer up: </div>
</div>
</body>

<script type="text/javascript">

var board = document.getElementById("board")
var event_number = 0;
var floating_boxes = {};

// Floating boxes for pointer events info utils
function floatingBox(id) {
    if (!floating_boxes[id]){
        var clone = document.getElementById("box-pen").cloneNode(true);
        clone.removeAttribute("id");
        for (var i = 0; i < clone.childrenCount; i++) clone.children[i].removeAttribute("id");
        document.getElementById("overlay").appendChild(clone);
        floating_boxes[id] = {
            box: clone,
            pointer_id: clone.children[0],
            pointer_down: clone.children[1],
            pointer_up: clone.children[2],
        };
        floating_boxes[id].pointer_id.innerHTML += " " + id;

    }
    return floating_boxes[id] 
}

function setFloatingBoxPosition(id, position) {
    var floating_box = floatingBox(id);
    floating_box.box.style.left = position.x + "px";
    floating_box.box.style.top = position.y + "px";
    return floating_box
}

// PointerEvent listeners
board.addEventListener('pointerdown', function(event){
    var floating_box = setFloatingBoxPosition(event.pointerId, {x: event.clientX, y:event.clientY});
    floating_box.pointer_down.innerHTML += " " + event_number;
    floating_box.box.style.visibility = "visible";

    event_number++;
}, false);

board.addEventListener('pointermove', function(event){
    setFloatingBoxPosition(event.pointerId, {x: event.clientX, y:event.clientY});
}, false);

board.addEventListener('pointerup', function(event){
    var floating_box = setFloatingBoxPosition(event.pointerId, {x: event.clientX, y:event.clientY});
    floating_box.pointer_up.innerHTML += " " + event_number;

    event_number++;
}, false);

</script>
</html>